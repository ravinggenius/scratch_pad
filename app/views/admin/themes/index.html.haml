%header
  %span.h Listing themes

%section
  - @themes.each do |scope, themes|
    = form_tag :action => :update, :scope => scope do
      %fieldset.addon
        %legend= scope.to_s.titleize
        %ul
          - themes.sort.each do |theme|
            %li
              = radio_button_tag scope, theme.machine_name, (@current_theme[scope] == theme)
              = label_tag "#{scope}_#{theme.machine_name}", "#{theme.name} - theme.description"
              - scope_url = "#{scope == :frontend ? :root : :admin_root}_url"
              %span.preview= link_to 'Preview', self.send(scope_url, :force_theme => theme.machine_name)
      %ul
        %li= submit_tag 'Commit'
